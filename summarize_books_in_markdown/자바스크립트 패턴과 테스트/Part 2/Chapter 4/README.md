# 🌈 패턴이 좋은 점

## 📚 사례 연구
훌륭한 개발자는 경험으로 축적된 패턴에서 지식을 끄집어내어 *무엇을 쓰면 될지 끊임없이 결정할 줄 아는* 사람이야말로 진정한 고수다. 예전에 겪은 겸험과 지혜를 잘 살릴 줄 아는 사람은ㅇ 모든 걸 하나하나 직접 만들려고 애쓰는 사람보다 경제적으로 깔끔하게 문제를 해결할 가능성이 크다.   

패턴의 범위는 사소한 원어의 관용 구문(`++i`)부터 시스템 구조(n-계층 아키텍처)에 이를 정도로 넓다. 루프문으로 배열을 순회하는 것도 일종의 패턴인데, 이 장에서 예시할 코드만 보더라도 사람들의 경험을 바탕으로 어떻게 패턴이 쌓여 점점 나은 방향으로 개선되었는지, 패턴을 사용함으로써 얼마나 코드가 깔끔하게 제자리를 잡는지 알 수 있다.   

아주 먼 옛날, 최초로 등장한 배열 루푸문은 다음과 같았다.

```js
ix = 0;
the_test;
if (ix >= myArray.length) {
  goto the_end;
}

doSomething(myArray[ix]);
ix = ix + 1;
goto the_test; // 자바스크립트에 goto문이 있다고 하자.
the_end:
```

`goto` 문이 있으며 코드를 읽어 내려가기 힘들어서 잘 사용하지 않게 됐다. 마침내 `goto`는 사용이 금지되어 자바스크립트에서는 자취를 감췄다. 이를 개선한 패턴이라 할 수 있는 `for` 루푸문이 언어에 장착됐다.

```js
for(var ix = 0; ix < myArray.length; ++ix) {
  doSomething(myArray[ix]);
}
```

하지만 여기서 끝이 아니다. 경험과 패턴이 축적되는 지금도 현재 진행형이다. 배열 원소를 순회하는 루프는 너무 자주 쓰이는 코드라서 ECMAScript5 언어 설계자들은 더욱 간결한 구문을 고안해냈다.

```js
myArray.forEach(doSomething);
```

위 코드는 깔끔할뿐더러 믿음이 가는 코드다. 조건문이 없으니 한끗차이 에러는 발생할 리 없고, 배열 인덱스를 가리키는 변수가 없으니 엉뚱한 원소를 참조할 일도 없다. 물론, `forEach` 문을 잘 구사할 줄 알고 콜백이 익숙한 개발자에게만 의미가 있다. 결국, 폭넓은 어휘력을 소유한 개발자가 더 우아한 코드를 작성할 수 있다.

## 📚 어휘력을 늘려 더 멋진 코드 만들기
기초 개념만으로 달여낸 코드가 가장 간단하고 이해하기 쉽다는 말은 미신이다. 어휘력이 떨어지면 외려 장황하고 비비 꼬인 프로그램으로 변질되기 쉽다. 다음 표는 앞서 언급한 `for`와 forEach를 사용한 루푸문을 서로 비교한 표다.

||`for`|`forEach`|
|:---:|:---:|:---:|
|할당|`ix=0`, `++ix`| 해당없음 |
|프로퍼티 참조|`myArray.length`|해당 없음|
|배열 원소 참조|`myArray[ix]`|해당 없음|
|조건 분기|`ix < myArray.length` |해당 없음|
|함수 호출|`doSomething(myArray[ix])`|`doSomething`|

배열 원소 각각에 `doSomething` 함수를 호출하는 일이 주목적인데, 할당, 프로퍼티 참조, 조건 분기 등 잡다한 일들이 끼어든다. 불필요한 쓰레기 더미에서 멋진 코드가 나올 리 없다.   

언어의 패턴을 달여 넣은 작은 실례로 언급했지만, 여러분이 개발 중인 코드 또는 서드파티 라이브러리에서 볼 수 있는 더 큰 규모의 패턴도 마찬가지다. 예를 들면 다음과 같다.
- 프라미스 패턴(6장)은 비동기 액션을 초기화하고 성공과 실패 케이스를 각각 처리할 콜백을 준다. 프라미스를 깨우치고 나면 이벤트 기반의 비동기 프로그래밍보다 훨씬 더 이해하기 쉽고 우아하며 탄탄한 코드를 작성할 수 있다.
- 정규 교육을 받지 못한 개발자는 장식자 패턴(12장)을 생각조차 하기 어렵겠지만, 이 패턴을 쓰면 단일 책임 원칙(1장)을 준수하면서 믿음성이 강화된 코드를 효과적으로 작성할 수 있다.

## 📚 잘 다듬고 테스트한 블록을 쌓아 믿음직한 코드 작성하기
전체적인 관점에서 보면 패턴은 후반부에 불과하며, 전반부에서는 항상 테스트가 자리한다(명심하길, 항상 테스트가 먼저다). 지극히 간단한 패턴이라도 테스트를 거치지 않으면 엉망이 된다는 사실을 경험으로 터득했다. 패턴이 코드로 정확하게 잘 옮겨지는지는 오직 테스트를 통ㅇ해 장담할 수 있다.   

개발자들은 대부분 패턴 자체를 이용해서 코딩하는 것보다 패턴을 이용한 코드를 빈틈없이 테스트하는 방법을 몰라 애를 먹는다.

## 📚 정리하기
소프트웨어 개발 세계에는 언어 문법과 관용 구문 같은 소규모 패턴과 시스템 구축 전반에 필요한 대규모 패턴이 있다. 체스 고수가 말을 움직일 때마다 익숙한 패턴에 의해 수를 읽는 것처럼 노련한 소프트웨어 개발자는 자신만의 폭넓은 패턴 어휘력을 보유한다. 패턴을 이렇게 사고의 안내자로 삼아 테스트를 충분히 거친 검증된 빌딩 블록을 쌓아 올려 믿음성 있는 시스템을 구축하는 것이다.
