# 🌈 Chapter 21: 테스트 가독성
- 테스트는 행위를 명확하게 표현해야 한다.
- 코드 가독성이 중요한 것과 같은 이유로 테스트 가독성도 중요하다.
- 테스트 코드는 제품 코드에서 **하는 일이 무엇인지** 반드시 기술해야 한다. 이것은 테스트 코드가 예상되는 결과의 예제로 사용하는 값에 관해서는 구체적이지만 해당 코드가 동작하는 방식에 관해서는 추상적인 경향이 있기 때문이다.
- 우리는 테스트 코드가 선언적으로 기술한 것처럼 읽히길 바란다.

## 📚 테스트 이름은 기능을 기술한다
- 대상 객체에서 제공하는 기능 측면에서 테스트 이름을 지어야 한다.

> - List는 항목이 추가된 순서대로 항목을 보관
> - List는 동일한 항목에 대해 여러 개의 참조를 보관할 수 있다.
> - List는 보관 중이지 않은 항목을 제거할 때 예외를 던진다.

```java
public class ListTests {
  @Test public void holdsItemsInTheOrderTheyWereAdded() { ... }
  @Test public void canHoldMultipleReferencesToTheSameItem() { ... }
  @Test public void throwsAnExceptionWhenRemovingAnItemItDoesntHold() { ... }
}
```

- 스타일 측면에서 테스트 이름은 **예상하는 결과와 객체의 행동, 시나리오의 동기에 관해 무언가를 말해줘야 한다.**

## 📚 정규 테스트 구조
- 테스트를 표준 형태로 작성하면 이해하기 쉽고 예상 결과를 단정을 빠르기 파악할 수 있고 테스트가 테스트 중인 코드와 어떻게 연결되는지 가늠할 수 있다.
- 가장 공통적인 테스트 형태는 다음과 같다.

> - 준비(setup): 대상 코드가 실행될 환경에 해당하는 테스트의 콘텍스트를 마련한다.
> - 실행(execute): 대상 코드를 호출해 테스트된 행위를 촉발한다.
> - 검증(Verify): 해당 행위에서 예상할 수 있는 가시적인 효과를 검사한다. 
> - 정리(Teardown): 다른 테스트에 손상을 입힐 수도 있는 잔존 상태를 정리한다.

## 📚 테스트 코드의 능률화
- 테스트 코드를 비롯해 모든 코드는 어떻게보다 무엇을 강조해야 한다.
- 메서드에 구현 세부 사항이 많이 포함될수록 해당 메서드를 읽는 사람은 무엇이 중요한지 이해하기 더 어려워진다.

#### 구조를 이용해 설명하라

#### 구조를 사용해 공유하라
- 테스트 구조를 도출할 때 유일하게 주의할 점은 테스트를 너무 추상적으로 만들어 테스트가 뭘 하는지 더는 알지 못하게 만들지 않도록 주의를 기울여야 한다는 것이다.
- 가장 큰 관심사는 테스트가 **대상 코드가 하는 일을 서술하게 해서 대상 코드의 흐름을 파악할 수 있을 정도로 리팩터링하는 것이다.**

#### 긍정적인 요소를 강조하라

#### 부수적인 객체에 위임하라

## 📚 단정과 예상 구문
- 테스트의 단정과 예상 구문은 대상 코드의 행위에서 중요한 바를 정확히 전달해야 한다.
- 우리가 작성하는 예상 구문과 단정의 경우, 그것들의 정의 범위를 되도록 좁히려고 노력한다.

## 📚 리터럴과 변수
- 설명이 없는 리터럴 값은 이해하기 어려울 수 있는데 그 이유는 프로그래머가 특정 값이 중요한지, 아니면 단순히 행위를 추적할 목적의 임의 위치 지정자에 해당하는지 해석해야 하기 때문이다.
- 리터럴 값은 자신의 역할을 기술하지 않는다. 해법은 리터럴 값을 변수나 상수에 할당하고, 그것들의 기능을 기술하는 이름을 부여하는 것이다.

```java
public static final Chat UNUSED_CHAT = null;
public final static INVALID_ID = 66;
```

- 우리는 변수에 이름을 부여해 이러한 값이나 객체가 테스트에서 수행하는 역할과 그것들의 대상 객체와의 관계를 보여준다.
